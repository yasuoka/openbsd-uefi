#	$OpenBSD: RAMDISK,v 1.1 2004/12/31 00:04:35 drahn Exp $
# $NetBSD: GENERIC,v 1.27.4.1 2002/08/01 04:18:06 lukem Exp $
#
# GENERIC machine description file
#
# This machine description file is used to generate the default OpenBSD
# kernel.  The generic kernel does not include all options, subsystems
# and device drivers, but should be useful for most applications.
#
# The machine description file can be customised for your specific
# machine to reduce the kernel size and improve its performance.
#
# For further information on compiling OpenBSD kernels, see the config(8)
# man page.
#
# For further information on hardware support for this architecture, see
# the intro(4) man page.  For further information about kernel options
# for this architecture, see the options(4) man page.  For an explanation
# of each device driver in this file see the section 4 man page for the
# device.

machine	zaurus	arm

# include "../../../conf/GENERIC"
option		TIMEZONE=0	# time zone to adjust RTC time by
option		DST=0		# daylight saving time used by RTC
option		COMPAT_43	# and 4.3BSD
option		FFS		# UFS
#option		NFSCLIENT	# Network File System client
option		CD9660		# ISO 9660 + Rock Ridge file system
option		MSDOSFS		# MS-DOS file system
option		INET		# IP + ICMP + TCP + UDP
option		INET6		# IPv6 (needs INET)
option		DDB		# kernel debugger
option		EXT2FS		# Second Extended Filesystem
option          FIFO            # FIFOs; RECOMMENDED

options		ARM32
#options 	ARM_INTR_IMPL="<arch/arm/xscale/pxa2x0_intr.h>"
options		PXA2x0_INTR
options 	COTULLA
options 	LUBBOCK
options		PXAGPIO_HAS_GPION_INTRS

options		CACHE_CLEAN_BLOCK_INTR

makeoptions	KERNEL_BASE_PHYS="0xa0200000"
makeoptions	KERNEL_BASE_VIRT="0xc0200000"
makeoptions	BOARDTYPE="zaurus"

# estimated number of users

maxusers	32

# Standard system options

#options 	UCONSOLE	# users can use TIOCCONS (for xconsole)
#options 	INSECURE	# disable kernel securelevel

#options 	RTC_OFFSET=0	# hardware clock is this many mins. west of GMT
#options 	NTP		# NTP phase/frequency locked loop

# CPU options

# For StrongARM systems
# CPU options
options 	CPU_XSCALE_PXA2X0	# Support the XScale core
options 	XSCALE_CACHE_WRITE_THROUGH
#options 	XSCALE_CACHE_WRITE_BACK
makeoptions	CPUFLAGS="-mcpu=xscale"

options SYSCALL_DEBUG

# FPA options

#options 	ARMFPE		# ARM Ltd FPE

#option WSDISPLAY_COMPAT_USL		# VT handling
#option WSDISPLAY_COMPAT_RAWKBD		# can get raw scancodes
#option WSDISPLAY_DEFAULTSCREENS=6	# can get raw scancodes
#option WSDISPLAY_COMPAT_PCVT		# can get raw scancodes

#config		bsd	swap generic
config		bsd	root on rd0a swap on rd0b

# The main bus device
mainbus0	at root
cpu0		at mainbus?
pxaip0		at mainbus?

pxaintc0	at pxaip?	# interrupt controller
pxagpio0	at pxaip?	# GPIO
saost0		at pxaip? addr 0x40a00000 size 0x20

# cotulla integrated 16550 UARTs
options COM_PXA2X0
com0	at pxaip?  addr 0x40100000 intr 22      # Full Function UART
com1	at pxaip?  addr 0x40200000 intr 21 	# BlueTootth UART
#com2	at pxaip?  addr 0x40700000 intr 20	# Standard UART (for IrDA)
options FFUARTCONSOLE
#options BTUARTCONSOLE
options KGDB_DEVNAME="\"btuart\""   # ffuart or btuart
options KGDB_DEVRATE=115200

#aupxa0	at pxaip?		# AC97 interface


# pcic
pxapcic0	at pxaip?
pcmcia*		at pxapcic?
wi*		at pcmcia?
wdc*		at pcmcia?

# IDE hard drives
wd*	at wdc? flags 0x0000

# On-board device support
obio0		at pxaip? intr 8
#sm0		at obio? addr 0x0c000000 intr 3 	# on-board SMC 91C96
#options LUBBOCK_SMC91C96_16BIT

# LCD
lcd0		at obio?
wsdisplay*	at lcd? console ?
options 	WSEMUL_VT100		# VT100 / VT220 emulation


# Pseudo-Devices
#pseudo-device	wsmux		2	# mouse & keyboard multiplexor
#pseudo-device	crypto		1
pseudo-device	loop		1	# network loopback
pseudo-device	bpfilter	1	# packet filter
pseudo-device	rd		1	# ram disk

option		BOOT_CONFIG	# boot-time kernel config

# RAMDISK stuff
#option		MINIROOTSIZE=8192
option		MINIROOTSIZE=5120
option		RAMDISK_HOOKS

